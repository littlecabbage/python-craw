# Trending 日报生成器 - 使用说明

## 功能概述

本工具支持从两个数据源生成 Trending 日报：
- **Zread Trending** (https://zread.ai/trending)
- **GitHub Trending** (https://github.com/trending)

## 安装

### 1. 安装依赖

```bash
uv sync
```

### 2. 安装 Playwright 浏览器

```bash
uv run playwright install chromium
```

## 使用方法

### 方式一：手动触发

#### 生成 Zread Trending 日报

```bash
uv run python trending_daily.py --zread
```

#### 生成 GitHub Trending 日报

```bash
uv run python trending_daily.py --github
```

#### 同时生成两个日报

```bash
uv run python trending_daily.py --zread --github
```

### 方式二：定时任务模式

#### 启动定时任务（默认时间）

默认配置：
- Zread Trending: 每天 09:00
- GitHub Trending: 每天 09:30

```bash
uv run python trending_daily.py --schedule
```

#### 自定义定时时间

```bash
# 设置 Zread 为 08:00，GitHub 为 08:30
uv run python trending_daily.py --schedule --zread-time 08:00 --github-time 08:30
```

#### 仅启用一个数据源

```bash
# 仅启用 Zread
uv run python trending_daily.py --schedule --zread-only

# 仅启用 GitHub
uv run python trending_daily.py --schedule --github-only
```

### 方式三：使用原有脚本（仅 Zread）

```bash
uv run python zread_trending_daily.py
```

## 输出文件

所有日报文件保存在 `reports/` 目录下：

- Zread Trending: `reports/zread_trending_report_YYYYMMDD.md`
- GitHub Trending: `reports/github_trending_report_YYYYMMDD.md`

## 命令行参数

```
--zread          生成 Zread Trending 日报
--github         生成 GitHub Trending 日报
--schedule       启动定时任务模式
--zread-time     设置 Zread 日报生成时间 (格式: HH:MM，默认: 09:00)
--github-time    设置 GitHub 日报生成时间 (格式: HH:MM，默认: 09:30)
--zread-only     定时任务模式：仅启用 Zread
--github-only    定时任务模式：仅启用 GitHub
```

## 定时任务说明

### 运行方式

定时任务在后台线程中运行，主线程会持续运行直到按 `Ctrl+C` 停止。

### 时间格式

时间格式为 `HH:MM`，使用 24 小时制：
- `09:00` - 上午 9 点
- `14:30` - 下午 2 点 30 分
- `23:59` - 晚上 11 点 59 分

### 停止定时任务

按 `Ctrl+C` 可以安全停止定时任务调度器。

## 日报内容

### Zread Trending 日报包含：

- 项目仓库名 (owner/repo)
- 项目简介（自动翻译为中文）
- 主要编程语言
- 项目亮点（最多 5 个）
- 项目标签
- GitHub Stars 数量
- 项目链接

### GitHub Trending 日报包含：

- 项目仓库名 (owner/repo)
- 项目简介（自动翻译为中文）
- 主要编程语言
- 项目亮点（最多 5 个）
- GitHub Stars 总数
- 今日新增 Stars
- 项目链接

## 模板自定义

日报使用 Jinja2 模板生成，模板文件位于 `templates/report.md.j2`。

你可以修改模板来自定义日报格式：

```jinja2
# {{ source }} Trending 日报
生成时间: {{ generate_time }}

## 今日热门项目 (共 {{ total_projects }} 个)

{% for project in projects %}
### {{ loop.index }}. {{ project.repo }}
...
{% endfor %}
```

## 注意事项

1. **首次运行**：需要下载 Chromium 浏览器（约 130MB）
2. **网络连接**：需要稳定的网络连接访问目标网站
3. **翻译服务**：使用 Google Translate API，可能有速率限制
4. **执行时间**：获取项目详情需要一定时间（约 1-2 分钟）
5. **定时任务**：确保程序持续运行，定时任务才能正常工作

## 故障排除

### 问题：无法访问网站

- 检查网络连接
- 确认目标网站可访问
- 检查防火墙设置

### 问题：翻译失败

- 检查网络连接
- Google Translate 可能有速率限制，稍后重试
- 翻译失败时会保留原文

### 问题：定时任务不执行

- 确认程序持续运行
- 检查系统时间是否正确
- 查看控制台输出是否有错误信息

## 项目结构

```
python_craw/
├── trending_daily.py          # 主控制器（推荐使用）
├── zread_trending_daily.py    # Zread 专用脚本
├── templates/
│   └── report.md.j2            # Jinja2 模板文件
├── reports/                   # 日报输出目录
│   ├── zread_trending_report_*.md
│   └── github_trending_report_*.md
├── docs/
│   └── 使用说明.md            # 本文件
└── pyproject.toml             # 项目配置
```

## 更新日志

### v0.2.0 (2025-12-14)
- ✅ 新增 GitHub Trending 支持
- ✅ 新增定时任务功能
- ✅ 新增主控制器统一管理
- ✅ 支持命令行参数配置

### v0.1.0 (2025-12-09)
- ✅ Zread Trending 日报生成
- ✅ 自动中文翻译
- ✅ 项目详情获取
- ✅ Jinja2 模板支持

## 技术支持

如有问题或建议，请查看项目文档或提交 Issue。

